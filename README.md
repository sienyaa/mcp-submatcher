# MCP SubMatcher

ä¸€ä¸ªåŸºäºç»Ÿè®¡åˆ†è¯åŒ¹é…ç®—æ³•çš„ MCP æœåŠ¡å™¨ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å°†æœ¬åœ°å­—å¹•æ–‡ä»¶é‡å‘½åä¸ºä¸å¯¹åº”è§†é¢‘åŒåï¼Œè§£å†³å‹åˆ¶ç»„ã€åˆ†è¾¨ç‡ç­‰å¹²æ‰°ä¿¡æ¯å¯¼è‡´çš„æ— æ³•è‡ªåŠ¨åŠ è½½å­—å¹•çš„é—®é¢˜ã€‚

---

## ç‰¹æ€§

- ğŸ¯ **æ™ºèƒ½åŒ¹é…ç®—æ³•**ï¼šåŸºäºæ–‡ä»¶ååˆ†è¯å’Œæƒé‡ç³»ç»Ÿï¼Œè‡ªåŠ¨åŒ¹é…è§†é¢‘å’Œå­—å¹•
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ**ï¼šæ”¯æŒç®€è‹±åŒè¯­ã€ç¹è‹±åŒè¯­ã€ç®€ä½“ä¸­æ–‡ã€ç¹ä½“ä¸­æ–‡ã€çº¯è‹±æ–‡
- ğŸ“Š **æ ¼å¼è¯†åˆ«**ï¼šASSæ ¼å¼ä¼˜å…ˆäºSRTæ ¼å¼
- ğŸ”§ **å‹åˆ¶ç»„è¯†åˆ«**ï¼šè¯†åˆ«ç›¸åŒçš„å‹åˆ¶ç»„ç»™äºˆé¢å¤–åŠ åˆ†
- ğŸ›¡ï¸ **å®‰å…¨æœºåˆ¶**ï¼šæ¼”ä¹ æ¨¡å¼ã€ç¡®è®¤æœºåˆ¶ã€å¤‡ä»½åŠŸèƒ½
- âš™ï¸ **å¯é…ç½®æ€§**ï¼šå®Œå…¨å¯å®šåˆ¶çš„æƒé‡å’ŒåŒ¹é…è§„åˆ™
- ğŸ”Œ **MCP åè®®**ï¼šé€šè¿‡ MCP åè®®ä¸ Claude Desktop ç­‰ AI å®¢æˆ·ç«¯é›†æˆ
- ğŸ“ **å®¡è®¡æ—¥å¿—**ï¼šè‡ªåŠ¨è®°å½•æ‰€æœ‰é…ç½®å˜æ›´

## å®‰è£…

### ç¯å¢ƒè¦æ±‚

- Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬
- [uv](https://github.com/astral-sh/uv) - å¿«é€Ÿ Python åŒ…ç®¡ç†å™¨
- [Claude Desktop](https://claude.ai/download) æˆ–å…¶ä»– MCP å®¢æˆ·ç«¯

### å¿«é€Ÿå®‰è£…

#### 1. å®‰è£… UVï¼ˆå¦‚æœè¿˜æœªå®‰è£…ï¼‰

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh  # macOS/Linux
# æˆ–
brew install uv  # macOS
```

#### 2. é…ç½® Claude Desktopï¼ˆæ¨èæ–¹å¼ï¼‰

ç›´æ¥åœ¨ Claude Desktop é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨ `uvx` ä» GitHub å®‰è£…ï¼Œæ— éœ€å…‹éš†é¡¹ç›®ã€‚

## é…ç½® MCP å®¢æˆ·ç«¯

### Claude Desktop é…ç½®

åœ¨ Claude Desktop çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  MCP æœåŠ¡å™¨ï¼š

**macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`

**Windows**: `%APPDATA%\Claude\claude_desktop_config.json`

æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "mcpServers": {
    "submatcher": {
      "command": "uvx",
      "args": [
        "--from",
        "git+https://github.com/sienyaa/mcp-submatcher",
        "mcp-submatcher"
      ]
    }
  }
}
```

**è¯´æ˜**ï¼š
- `uvx` ä¼šè‡ªåŠ¨ä» GitHub ä¸‹è½½å¹¶è¿è¡Œæœ€æ–°ç‰ˆæœ¬çš„ MCP SubMatcher
- æ— éœ€æ‰‹åŠ¨å…‹éš†é¡¹ç›®æˆ–å®‰è£…ä¾èµ–
- æ¯æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ£€æŸ¥å¹¶ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬

### é«˜çº§é…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬æˆ–æœ¬åœ°å¼€å‘ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "mcpServers": {
    "submatcher": {
      "command": "uv",
      "args": [
        "--directory",
        "/path/to/mcp-submatcher",
        "run",
        "mcp-submatcher"
      ]
    }
  }
}
```

**è¯´æ˜**ï¼š
- é€‚ç”¨äºæœ¬åœ°å¼€å‘æˆ–éœ€è¦ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬çš„æƒ…å†µ
- éœ€è¦å…ˆå…‹éš†é¡¹ç›®å¹¶è¿è¡Œ `uv sync`

### é‡å¯ Claude Desktop

é…ç½®å®Œæˆåï¼Œé‡å¯ Claude Desktop ä»¥åŠ è½½ MCP æœåŠ¡å™¨ã€‚

## å¿«é€Ÿå¼€å§‹

é…ç½®å®Œæˆåï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ Claude Desktop ä¸­ä¸å¯¹è¯ï¼š

```
ä½ ï¼šè¯·æ‰«æ /Users/username/Videos/TVShows ç›®å½•ä¸­çš„è§†é¢‘å’Œå­—å¹•æ–‡ä»¶

Claudeï¼š[è‡ªåŠ¨è°ƒç”¨ scan_media_files å·¥å…·]
æ‰«æå®Œæˆï¼Œæ‰¾åˆ° 5 ä¸ªè§†é¢‘æ–‡ä»¶å’Œ 6 ä¸ªå­—å¹•æ–‡ä»¶ã€‚

ä½ ï¼šè¯·é¢„è§ˆè¿™ä¸ªç›®å½•ä¸­çš„å­—å¹•åŒ¹é…ç»“æœ

Claudeï¼š[è‡ªåŠ¨è°ƒç”¨ preview_matching å·¥å…·]
åŒ¹é…ç»“æœé¢„è§ˆï¼š
1. Breaking.Bad.S01E01.1080p.BluRay.x264-SPARKS.mkv
   - åŒ¹é…å­—å¹•: Breaking.Bad.S01E01.chs&eng.ass (è¯„åˆ†: 280.0)
2. Breaking.Bad.S01E02.720p.WEB-DL.DDP5.1.H.264-NTb.mkv
   - åŒ¹é…å­—å¹•: Breaking.Bad.S01E02.cht&eng.srt (è¯„åˆ†: 270.0)

ä½ ï¼šçœ‹èµ·æ¥ä¸é”™ï¼Œè¯·æ‰§è¡Œå®é™…é‡å‘½å

Claudeï¼š[è‡ªåŠ¨è°ƒç”¨ rename_subtitles å·¥å…·]
é‡å‘½åå®Œæˆï¼š
- Breaking.Bad.S01E01.chs&eng.ass â†’ Breaking.Bad.S01E01.1080p.BluRay.x264-SPARKS.ass
- Breaking.Bad.S01E02.cht&eng.srt â†’ Breaking.Bad.S01E02.720p.WEB-DL.DDP5.1.H.264-NTb.srt
```

å°±è¿™ä¹ˆç®€å•ï¼æ— éœ€æ‰‹åŠ¨è¿è¡Œä»»ä½•å‘½ä»¤ï¼Œåªéœ€ä¸ Claude å¯¹è¯å³å¯ã€‚

## å·¥å…·è¯¦è§£

MCP SubMatcher æä¾›ä»¥ä¸‹ 6 ä¸ªå·¥å…·ï¼š

### 1. scan_media_files

æ‰«ææŒ‡å®šç›®å½•ä¸­çš„è§†é¢‘å’Œå­—å¹•æ–‡ä»¶ã€‚

**å‚æ•°**ï¼š
- `directory` (string, å¿…éœ€): è¦æ‰«æçš„ç›®å½•è·¯å¾„

**å¯¹è¯ç¤ºä¾‹**ï¼š
```
ä½ ï¼šè¯·æ‰«æ /Users/username/Videos/TVShows ç›®å½•ä¸­çš„è§†é¢‘å’Œå­—å¹•æ–‡ä»¶

Claudeï¼š[è°ƒç”¨ scan_media_files å·¥å…·]
æ‰«æå®Œæˆï¼Œæ‰¾åˆ° 5 ä¸ªè§†é¢‘æ–‡ä»¶å’Œ 6 ä¸ªå­—å¹•æ–‡ä»¶ã€‚
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```json
{
  "success": true,
  "directory": "/Users/username/Videos/TVShows",
  "video_files": [
    {
      "path": "/Users/username/Videos/TVShows/Breaking.Bad.S01E01.1080p.BluRay.x264-SPARKS.mkv",
      "file_type": "video",
      "name": "Breaking.Bad.S01E01.1080p.BluRay.x264-SPARKS.mkv",
      "stem": "Breaking.Bad.S01E01.1080p.BluRay.x264-SPARKS",
      "extension": ".mkv",
      "tokens": ["breaking", "bad", "s01e01", "1080p", "bluray", "x264", "sparks"],
      "season": 1,
      "episode": 1
    }
  ],
  "subtitle_files": [
    {
      "path": "/Users/username/Videos/TVShows/Breaking.Bad.S01E01.chs&eng.ass",
      "file_type": "subtitle",
      "name": "Breaking.Bad.S01E01.chs&eng.ass",
      "stem": "Breaking.Bad.S01E01.chs&eng",
      "extension": ".ass",
      "tokens": ["breaking", "bad", "s01e01", "chs&eng"],
      "season": 1,
      "episode": 1
    }
  ],
  "video_count": 5,
  "subtitle_count": 6
}
```

### 2. preview_matching

é¢„è§ˆå­—å¹•åŒ¹é…ç»“æœï¼ˆæ¼”ä¹ æ¨¡å¼ï¼Œä¸ä¼šå®é™…ä¿®æ”¹æ–‡ä»¶ï¼‰ã€‚

**å‚æ•°**ï¼š
- `directory` (string, å¿…éœ€): è¦åˆ†æçš„ç›®å½•è·¯å¾„

**å¯¹è¯ç¤ºä¾‹**ï¼š
```
ä½ ï¼šè¯·é¢„è§ˆ /Users/username/Videos/TVShows ç›®å½•ä¸­çš„å­—å¹•åŒ¹é…ç»“æœ

Claudeï¼š[è°ƒç”¨ preview_matching å·¥å…·]
åŒ¹é…ç»“æœé¢„è§ˆï¼š
1. Breaking.Bad.S01E01.1080p.BluRay.x264-SPARKS.mkv
   - åŒ¹é…å­—å¹•: Breaking.Bad.S01E01.chs&eng.ass (è¯„åˆ†: 280.0)
   - è¯­è¨€æƒé‡: 120.0
   - æ ¼å¼æƒé‡: 100.0
   - è¡€ç»ŸåŠ åˆ†: 0.0
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```json
[
  {
    "video": {
      "path": "/Users/username/Videos/TVShows/Breaking.Bad.S01E01.1080p.BluRay.x264-SPARKS.mkv",
      "file_type": "video",
      "name": "Breaking.Bad.S01E01.1080p.BluRay.x264-SPARKS.mkv",
      "stem": "Breaking.Bad.S01E01.1080p.BluRay.x264-SPARKS",
      "extension": ".mkv",
      "tokens": ["breaking", "bad", "s01e01", "1080p", "bluray", "x264", "sparks"],
      "season": 1,
      "episode": 1
    },
    "subtitle": {
      "path": "/Users/username/Videos/TVShows/Breaking.Bad.S01E01.chs&eng.ass",
      "file_type": "subtitle",
      "name": "Breaking.Bad.S01E01.chs&eng.ass",
      "stem": "Breaking.Bad.S01E01.chs&eng",
      "extension": ".ass",
      "tokens": ["breaking", "bad", "s01e01", "chs&eng"],
      "season": 1,
      "episode": 1
    },
    "score": 280.0,
    "language_weight": 120.0,
    "format_weight": 100.0,
    "lineage_bonus": 0.0
  }
]
```

### 3. rename_subtitles

æ‰§è¡Œå­—å¹•é‡å‘½åæ“ä½œã€‚

**å‚æ•°**ï¼š
- `directory` (string, å¿…éœ€): è¦å¤„ç†çš„ç›®å½•è·¯å¾„
- `confirm` (boolean, å¯é€‰): æ˜¯å¦ç¡®è®¤æ‰§è¡Œå®é™…é‡å‘½åï¼ˆé»˜è®¤ä¸º falseï¼Œä»…æ¼”ä¹ æ¨¡å¼ï¼‰

**å¯¹è¯ç¤ºä¾‹**ï¼š
```
ä½ ï¼šè¯·é‡å‘½å /Users/username/Videos/TVShows ç›®å½•ä¸­çš„å­—å¹•æ–‡ä»¶

Claudeï¼š[è°ƒç”¨ rename_subtitles å·¥å…·ï¼Œconfirm=false]
æ¼”ä¹ æ¨¡å¼å®Œæˆï¼Œå°†é‡å‘½å 3 ä¸ªå­—å¹•æ–‡ä»¶ã€‚

ä½ ï¼šç¡®è®¤æ‰§è¡Œå®é™…é‡å‘½å

Claudeï¼š[è°ƒç”¨ rename_subtitles å·¥å…·ï¼Œconfirm=true]
é‡å‘½åå®Œæˆï¼š
- Breaking.Bad.S01E01.chs&eng.ass â†’ Breaking.Bad.S01E01.1080p.BluRay.x264-SPARKS.ass
- Breaking.Bad.S01E02.cht&eng.srt â†’ Breaking.Bad.S01E02.720p.WEB-DL.DDP5.1.H.264-NTb.srt
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```json
{
  "success": true,
  "directory": "/Users/username/Videos/TVShows",
  "dry_run": false,
  "renamed_count": 3,
  "failed_count": 0,
  "skipped_count": 0,
  "renamed_files": [
    {
      "old_name": "Breaking.Bad.S01E01.chs&eng.ass",
      "new_name": "Breaking.Bad.S01E01.1080p.BluRay.x264-SPARKS.ass",
      "video_name": "Breaking.Bad.S01E01.1080p.BluRay.x264-SPARKS.mkv",
      "score": 280.0
    }
  ],
  "failed_files": [],
  "skipped_files": []
}
```

### 4. get_config_value

è·å–é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè·¯å¾„çš„å€¼ã€‚

**å‚æ•°**ï¼š
- `path` (string, å¿…éœ€): é…ç½®è·¯å¾„ï¼Œæ”¯æŒç‚¹å·è·¯å¾„å’Œæ•°ç»„ç´¢å¼•

**å¯¹è¯ç¤ºä¾‹**ï¼š
```
ä½ ï¼šè¯·è·å–é…ç½®ä¸­è¯­è¨€æƒé‡çš„ç¬¬ä¸€ä¸ªå€¼

Claudeï¼š[è°ƒç”¨ get_config_value å·¥å…·]
é…ç½®å€¼ï¼š120

ä½ ï¼šè¯·è·å–é…ç½®ä¸­å®‰å…¨è®¾ç½®çš„ dry_run å€¼

Claudeï¼š[è°ƒç”¨ get_config_value å·¥å…·]
é…ç½®å€¼ï¼šfalse
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```json
120
```

### 5. set_config_value

è®¾ç½®é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè·¯å¾„çš„å€¼ã€‚

**å‚æ•°**ï¼š
- `path` (string, å¿…éœ€): é…ç½®è·¯å¾„ï¼Œæ”¯æŒç‚¹å·è·¯å¾„å’Œæ•°ç»„ç´¢å¼•
- `value` (any, å¿…éœ€): è¦è®¾ç½®çš„å€¼ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ç­‰

**å¯¹è¯ç¤ºä¾‹**ï¼š
```
ä½ ï¼šè¯·å°†é…ç½®ä¸­å®‰å…¨è®¾ç½®çš„ dry_run è®¾ç½®ä¸º true

Claudeï¼š[è°ƒç”¨ set_config_value å·¥å…·]
é…ç½®å·²æ›´æ–°ï¼š
- é…ç½®è·¯å¾„: safety.dry_run
- æ—§å€¼: false
- æ–°å€¼: true
- å¤‡ä»½æ–‡ä»¶: /path/to/.config_backups/config_backup_20260201_165517.yaml

ä½ ï¼šè¯·å°†è¯­è¨€æƒé‡ä¸­ç®€è‹±åŒè¯­çš„æƒé‡è®¾ç½®ä¸º 150

Claudeï¼š[è°ƒç”¨ set_config_value å·¥å…·]
é…ç½®å·²æ›´æ–°ï¼š
- é…ç½®è·¯å¾„: language_weights[0].weight
- æ—§å€¼: 120
- æ–°å€¼: 150
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```json
{
  "success": true,
  "path": "safety.dry_run",
  "config_path": "/path/to/core/config.yaml",
  "backup_path": "/path/to/.config_backups/config_backup_20260201_165517.yaml",
  "old_value": false,
  "new_value": true,
  "error": null,
  "timestamp": "2026-02-01 16:55"
}
```

### 6. get_config_summary

è·å–å½“å‰é…ç½®æ‘˜è¦ã€‚

**å‚æ•°**ï¼šæ— 

**å¯¹è¯ç¤ºä¾‹**ï¼š
```
ä½ ï¼šè¯·è·å–å½“å‰é…ç½®æ‘˜è¦

Claudeï¼š[è°ƒç”¨ get_config_summary å·¥å…·]
å½“å‰é…ç½®æ‘˜è¦ï¼š
- è¯­è¨€æƒé‡: 5 ç§è¯­è¨€ç±»å‹
- æ ¼å¼æƒé‡: 2 ç§æ ¼å¼
- å‹åˆ¶ç»„åŠ åˆ†: å·²å¯ç”¨
- å®‰å…¨è®¾ç½®: dry_run=false, require_confirm=true
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```json
{
  "language_weights": [
    {"name": "ç®€è‹±åŒè¯­", "weight": 120, "keywords": ["chs&eng", "åŒè¯­"]},
    {"name": "ç¹è‹±åŒè¯­", "weight": 90, "keywords": ["cht&eng", "ç¹è‹±"]},
    {"name": "ç®€ä½“ä¸­æ–‡", "weight": 80, "keywords": ["chs", "sc", "ç®€ä½“"]},
    {"name": "ç¹ä½“ä¸­æ–‡", "weight": 70, "keywords": ["cht", "tc", "ç¹ä½“"]},
    {"name": "çº¯è‹±æ–‡", "weight": 60, "keywords": ["eng", "en", "english"]}
  ],
  "format_weights": [
    {"name": "ass", "weight": 100, "description": "ç‰¹æ•ˆå­—å¹•æ ¼å¼"},
    {"name": "srt", "weight": 80, "description": "é€šç”¨å­—å¹•æ ¼å¼"}
  ],
  "lineage_bonus": {
    "enabled": true,
    "weight": 20,
    "common_release_groups": ["eztv", "rarbg", "sparks"]
  },
  "safety": {
    "dry_run": false,
    "require_confirm": true,
    "backup_enabled": false,
    "backup_dir": ".backup"
  },
  "matching": {
    "min_common_tokens": 1,
    "min_score_threshold": 50,
    "skip_on_conflict": true,
    "log_unmatched": true
  }
}
```

## é…ç½®ç®¡ç†

### é…ç½®æ–‡ä»¶ä½ç½®

é…ç½®æ–‡ä»¶ä½äº `core/config.yaml`ã€‚

### ä¸»è¦é…ç½®é¡¹

#### 1. è¯­è¨€æƒé‡é…ç½®

æ§åˆ¶å­—å¹•è¯­è¨€çš„ä¼˜å…ˆçº§ï¼Œæƒé‡è¶Šé«˜è¶Šä¼˜å…ˆã€‚

```yaml
language_weights:
  - name: "ç®€è‹±åŒè¯­"
    weight: 120
    keywords:
      - "chs&eng"
      - "cht&eng"
      - "ç®€ä½“&è‹±æ–‡"
      - "åŒè¯­"
      - "ä¸­è‹±"
      - "zh&en"
```

**è¯´æ˜**ï¼š
- `weight`: è¯­è¨€æƒé‡å€¼ï¼Œè¶Šé«˜è¶Šä¼˜å…ˆ
- `keywords`: è¯†åˆ«è¯¥è¯­è¨€çš„å…³é”®è¯åˆ—è¡¨ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰

#### 2. æ ¼å¼æƒé‡é…ç½®

æ§åˆ¶å­—å¹•æ ¼å¼çš„ä¼˜å…ˆçº§ã€‚

```yaml
format_weights:
  - name: "ass"
    weight: 100
    description: "ç‰¹æ•ˆå­—å¹•æ ¼å¼ï¼Œæ”¯æŒæ ·å¼å’Œç‰¹æ•ˆ"
  - name: "srt"
    weight: 80
    description: "é€šç”¨å­—å¹•æ ¼å¼"
```

#### 3. è¡€ç»ŸåŒ¹é…åŠ åˆ†

å¦‚æœå­—å¹•æ–‡ä»¶ååŒ…å«ä¸è§†é¢‘ç›¸åŒçš„å‹åˆ¶ç»„æ ‡è¯†ï¼Œç»™äºˆé¢å¤–åŠ åˆ†ã€‚

```yaml
lineage_bonus:
  enabled: true
  weight: 20
  description: "å¦‚æœå­—å¹•æ–‡ä»¶ååŒ…å«ä¸è§†é¢‘ç›¸åŒçš„å‹åˆ¶ç»„æ ‡è¯†ï¼Œç»™äºˆé¢å¤–åŠ åˆ†"
  common_release_groups:
    - "eztv"
    - "rarbg"
    - "vxt"
    - "yify"
    - "sparks"
```

#### 4. æ–‡ä»¶æ‰©å±•åé…ç½®

å®šä¹‰æ”¯æŒçš„è§†é¢‘å’Œå­—å¹•æ ¼å¼ã€‚

```yaml
file_extensions:
  video:
    - ".mp4"
    - ".mkv"
    - ".avi"
  subtitle:
    - ".ass"
    - ".srt"
```

#### 5. åˆ†è¯é…ç½®

æ§åˆ¶æ–‡ä»¶ååˆ†è¯çš„è¡Œä¸ºã€‚

```yaml
tokenization:
  separators:
    - "."
    - "_"
    - "-"
    - "["
    - "]"
    - "("
    - ")"
    - " "
  min_token_length: 2
  ignore_tokens:
    - "the"
    - "a"
    - "an"
    - "of"
    - "in"
    - "on"
```

#### 6. é›†æ•°æå–é…ç½®

å®šä¹‰è¯†åˆ«å­£å·å’Œé›†å·çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ã€‚

```yaml
episode_patterns:
  - pattern: "S(\\d{1,2})E(\\d{1,2})"
    season_group: 1
    episode_group: 2
  - pattern: "(\\d{1,2})x(\\d{1,2})"
    season_group: 1
    episode_group: 2
```

#### 7. å®‰å…¨é…ç½®

æ§åˆ¶ç¨‹åºçš„å®‰å…¨è¡Œä¸ºã€‚

```yaml
safety:
  dry_run: false
  require_confirm: true
  backup_enabled: false
  backup_dir: ".backup"
```

### åŠ¨æ€é…ç½®

é€šè¿‡ MCP å·¥å…·å¯ä»¥åŠ¨æ€ä¿®æ”¹é…ç½®ï¼š

```
ç”¨æˆ·ï¼šè¯·å°†é…ç½®ä¸­å®‰å…¨è®¾ç½®çš„ dry_run è®¾ç½®ä¸º true

Claudeï¼š[è°ƒç”¨ set_config_value å·¥å…·]
é…ç½®å·²æ›´æ–°ï¼šsafety.dry_run = true
```

## å®‰å…¨åŠŸèƒ½

### 1. æ¼”ä¹ æ¨¡å¼ (Dry Run)

åœ¨æ¼”ä¹ æ¨¡å¼ä¸‹ï¼Œå·¥å…·åªæ˜¾ç¤ºå°†è¦æ‰§è¡Œçš„æ“ä½œï¼Œä¸å®é™…ä¿®æ”¹æ–‡ä»¶ã€‚

**å¯ç”¨æ¼”ä¹ æ¨¡å¼**ï¼š
```
ä½ ï¼šè¯·å°†é…ç½®ä¸­å®‰å…¨è®¾ç½®çš„ dry_run è®¾ç½®ä¸º true

Claudeï¼š[è°ƒç”¨ set_config_value å·¥å…·]
é…ç½®å·²æ›´æ–°ï¼šsafety.dry_run = true
```

**ä½¿ç”¨æ¼”ä¹ æ¨¡å¼**ï¼š
```
ä½ ï¼šè¯·é¢„è§ˆ /Users/username/Videos/TVShows ç›®å½•ä¸­çš„å­—å¹•åŒ¹é…ç»“æœ

Claudeï¼š[è°ƒç”¨ preview_matching å·¥å…·]
æ¼”ä¹ æ¨¡å¼å®Œæˆï¼Œå°†é‡å‘½å 3 ä¸ªå­—å¹•æ–‡ä»¶ï¼ˆä¸ä¼šå®é™…ä¿®æ”¹æ–‡ä»¶ï¼‰ã€‚
```

### 2. ç¡®è®¤æœºåˆ¶

è¦æ±‚ç”¨æˆ·ç¡®è®¤åæ‰æ‰§è¡Œé‡å‘½åæ“ä½œã€‚

**é…ç½®ç¡®è®¤æœºåˆ¶**ï¼š
```
ä½ ï¼šè¯·å¯ç”¨ç¡®è®¤æœºåˆ¶

Claudeï¼š[è°ƒç”¨ set_config_value å·¥å…·ï¼Œpath="safety.require_confirm", value=true]
é…ç½®å·²æ›´æ–°ï¼šsafety.require_confirm = true
```

**ç¦ç”¨ç¡®è®¤æœºåˆ¶ï¼ˆè‡ªåŠ¨æ‰§è¡Œï¼‰**ï¼š
```
ä½ ï¼šè¯·ç¦ç”¨ç¡®è®¤æœºåˆ¶

Claudeï¼š[è°ƒç”¨ set_config_value å·¥å…·ï¼Œpath="safety.require_confirm", value=false]
é…ç½®å·²æ›´æ–°ï¼šsafety.require_confirm = false
```

### 3. å¤‡ä»½åŠŸèƒ½

åœ¨æ‰§è¡Œé‡å‘½åå‰å¤‡ä»½åŸå§‹æ–‡ä»¶ã€‚

**å¯ç”¨å¤‡ä»½åŠŸèƒ½**ï¼š
```
ä½ ï¼šè¯·å¯ç”¨å¤‡ä»½åŠŸèƒ½

Claudeï¼š[è°ƒç”¨ set_config_value å·¥å…·ï¼Œpath="safety.backup_enabled", value=true]
é…ç½®å·²æ›´æ–°ï¼šsafety.backup_enabled = true
```

**è®¾ç½®å¤‡ä»½ç›®å½•**ï¼š
```
ä½ ï¼šè¯·å°†å¤‡ä»½ç›®å½•è®¾ç½®ä¸º subtitle_backups

Claudeï¼š[è°ƒç”¨ set_config_value å·¥å…·ï¼Œpath="safety.backup_dir", value="subtitle_backups"]
é…ç½®å·²æ›´æ–°ï¼šsafety.backup_dir = subtitle_backups
```

**å¤‡ä»½æ–‡ä»¶ç»“æ„**ï¼š
```
å½“å‰ç›®å½•/
â”œâ”€â”€ .backup/  # æˆ–è‡ªå®šä¹‰å¤‡ä»½ç›®å½•
â”‚   â”œâ”€â”€ Breaking.Bad.S01E01.chs&eng.ass
â”‚   â”œâ”€â”€ Breaking.Bad.S01E02.cht&eng.srt
â”‚   â””â”€â”€ Breaking.Bad.S01E03.chs&eng.ass
â””â”€â”€ ... # å…¶ä»–æ–‡ä»¶
```

### 4. é…ç½®æ–‡ä»¶è‡ªåŠ¨å¤‡ä»½

æ¯æ¬¡ä¿®æ”¹é…ç½®æ—¶è‡ªåŠ¨å¤‡ä»½é…ç½®æ–‡ä»¶ã€‚

**å¤‡ä»½ä½ç½®**ï¼š
```
.config_backups/
â”œâ”€â”€ config_backup_20260201_165517.yaml
â”œâ”€â”€ config_backup_20260201_165520.yaml
â””â”€â”€ config_backup_20260201_165525.yaml
```

**å®¡è®¡æ—¥å¿—**ï¼š
æ‰€æœ‰é…ç½®å˜æ›´éƒ½ä¼šè®°å½•åˆ° `SYSTEM_MOD_LOG.md` æ–‡ä»¶ä¸­ï¼ŒåŒ…æ‹¬ï¼š
- æ—¶é—´æˆ³
- é…ç½®è·¯å¾„
- æ—§å€¼å’Œæ–°å€¼
- ç¯å¢ƒä¿¡æ¯

## å·¥ä½œåŸç†

### 1. æ–‡ä»¶æ‰«æ

ç¨‹åºé€’å½’æ‰«ææŒ‡å®šç›®å½•ï¼Œè¯†åˆ«æ‰€æœ‰è§†é¢‘æ–‡ä»¶å’Œå­—å¹•æ–‡ä»¶ã€‚

### 2. åˆ†è¯å¤„ç†

ä½¿ç”¨é…ç½®çš„åˆ†éš”ç¬¦å°†æ–‡ä»¶ååˆ‡ç¢ä¸ºå•è¯å…ƒï¼ˆTokensï¼‰ã€‚

**ç¤ºä¾‹**ï¼š
```
Breaking.Bad.S01E01.1080p.BluRay.x264-SPARKS.mkv
â†“ åˆ†è¯å
['breaking', 'bad', 's01e01', '1080p', 'bluray', 'x264', 'sparks']
```

### 3. èšç±»åˆ†æ

ç»Ÿè®¡æ‰€æœ‰æ–‡ä»¶ä¸­æ¯ä¸ªTokenå‡ºç°çš„é¢‘ç‡ï¼Œè¯†åˆ«"å…¨å±€Token"ï¼ˆé«˜é¢‘è¯ï¼‰ã€‚

**ç›®çš„**ï¼šåŒºåˆ†æ–‡ä»¶å¤¹å†…æ··æ‚çš„å¤šéƒ¨ä¸åŒç¾å‰§ã€‚

### 4. é›†æ•°æå–

ä»æ–‡ä»¶åä¸­æå–å­£å·å’Œé›†å·ï¼Œæ”¯æŒå¤šç§æ ¼å¼ï¼š

- `S01E01` â†’ Season 1, Episode 1
- `1x01` â†’ Season 1, Episode 1
- `101` â†’ Season 1, Episode 01

### 5. åŒ¹é…ç®—æ³•

åŸºäº"å…¨å±€Token"å’Œ"é›†æ•°é”šç‚¹"åŒé‡éªŒè¯å»ºç«‹å¯¹åº”å…³ç³»ã€‚

**åŒ¹é…æ¡ä»¶**ï¼š
- å­˜åœ¨å…±åŒçš„å…¨å±€Token
- å­£å·å’Œé›†å·åŒ¹é…ï¼ˆæˆ–è‡³å°‘é›†å·åŒ¹é…ï¼‰

### 6. è¯„åˆ†ç³»ç»Ÿ

å½“ä¸€ä¸ªè§†é¢‘å¯¹åº”å¤šä¸ªå€™é€‰å­—å¹•æ—¶ï¼ŒæŒ‰ä»¥ä¸‹æƒé‡è‡ªåŠ¨ç­›é€‰æœ€ä¼˜è§£ï¼š

**è¯„åˆ†å…¬å¼**ï¼š
```
æ€»åˆ† = åŸºç¡€åˆ† + è¯­è¨€æƒé‡ + æ ¼å¼æƒé‡ + è¡€ç»ŸåŠ åˆ†
```

**æƒé‡è¯´æ˜**ï¼š
1. **åŸºç¡€åˆ†**ï¼šåŸºäºå…±åŒTokenå’Œé›†æ•°åŒ¹é…
2. **è¯­è¨€æƒé‡**ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰ï¼š
   - ç®€è‹±åŒè¯­ï¼š120åˆ†
   - ç¹è‹±åŒè¯­ï¼š90åˆ†
   - ç®€ä½“ä¸­æ–‡ï¼š80åˆ†
   - ç¹ä½“ä¸­æ–‡ï¼š70åˆ†
   - çº¯è‹±æ–‡ï¼š60åˆ†

3. **æ ¼å¼æƒé‡**ï¼š
   - `.ass`ï¼š100åˆ†ï¼ˆæ”¯æŒç‰¹æ•ˆï¼‰
   - `.srt`ï¼š80åˆ†ï¼ˆé€šç”¨æ ¼å¼ï¼‰

4. **è¡€ç»ŸåŠ åˆ†**ï¼š
   - å¦‚æœå­—å¹•å’Œè§†é¢‘æœ‰ç›¸åŒçš„å‹åˆ¶ç»„æ ‡è¯†ï¼š+20åˆ†

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ²¡æœ‰æ‰¾åˆ°åŒ¹é…

**é—®é¢˜**ï¼šå·¥å…·æ²¡æœ‰æ‰¾åˆ°ä»»ä½•åŒ¹é…çš„å­—å¹•æ–‡ä»¶ã€‚

**å¯èƒ½åŸå› **ï¼š
- å­—å¹•æ–‡ä»¶åä¸è§†é¢‘æ–‡ä»¶åå·®å¼‚å¤ªå¤§
- åŒ¹é…åˆ†æ•°ä½äºé˜ˆå€¼ï¼ˆé»˜è®¤50åˆ†ï¼‰
- æ–‡ä»¶ç¼–ç é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
```
ä½ ï¼šè¯·é™ä½åŒ¹é…é˜ˆå€¼

Claudeï¼š[è°ƒç”¨ set_config_value å·¥å…·ï¼Œpath="matching.min_score_threshold", value=30]
é…ç½®å·²æ›´æ–°ï¼šmatching.min_score_threshold = 30

ä½ ï¼šè¯·æ£€æŸ¥æ–‡ä»¶ç¼–ç 
Claudeï¼šå»ºè®®ç¡®ä¿æ–‡ä»¶åä½¿ç”¨ UTF-8 ç¼–ç 
```

#### 2. åŒ¹é…é”™è¯¯

**é—®é¢˜**ï¼šå·¥å…·åŒ¹é…äº†é”™è¯¯çš„å­—å¹•æ–‡ä»¶ã€‚

**å¯èƒ½åŸå› **ï¼š
- å¤šä¸ªå‰§é›†æœ‰ç›¸ä¼¼çš„å‘½å
- æƒé‡è®¾ç½®ä¸åˆç†

**è§£å†³æ–¹æ¡ˆ**ï¼š
```
ä½ ï¼šè¯·æé«˜åŒ¹é…ç²¾åº¦

Claudeï¼š[è°ƒç”¨ set_config_value å·¥å…·ï¼Œpath="matching.min_common_tokens", value=2]
é…ç½®å·²æ›´æ–°ï¼šmatching.min_common_tokens = 2

ä½ ï¼šè¯·è°ƒæ•´è¯­è¨€æƒé‡

Claudeï¼š[è°ƒç”¨ set_config_value å·¥å…·ï¼Œpath="language_weights[0].weight", value=200]
é…ç½®å·²æ›´æ–°ï¼šlanguage_weights[0].weight = 200
```

#### 3. æƒé™é—®é¢˜

**é—®é¢˜**ï¼šæ— æ³•é‡å‘½åæ–‡ä»¶ã€‚

**å¯èƒ½åŸå› **ï¼š
- æ–‡ä»¶åªè¯»æƒé™
- ç›®å½•æƒé™ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la æ–‡ä»¶å

# ä¿®æ”¹æƒé™
chmod +w æ–‡ä»¶å
```

### è°ƒè¯•æ¨¡å¼

#### å¯ç”¨è¯¦ç»†æ—¥å¿—

```
ä½ ï¼šè¯·è®°å½•æœªåŒ¹é…çš„æ–‡ä»¶

Claudeï¼š[è°ƒç”¨ set_config_value å·¥å…·ï¼Œpath="matching.log_unmatched", value=true]
é…ç½®å·²æ›´æ–°ï¼šmatching.log_unmatched = true

ä½ ï¼šè¯·åœ¨å†²çªæ—¶è·³è¿‡

Claudeï¼š[è°ƒç”¨ set_config_value å·¥å…·ï¼Œpath="matching.skip_on_conflict", value=true]
é…ç½®å·²æ›´æ–°ï¼šmatching.skip_on_conflict = true
```

#### æ£€æŸ¥åŒ¹é…åˆ†æ•°

```
ä½ ï¼šè¯·è·å–è¯¦ç»†çš„åŒ¹é…åˆ†æ

Claudeï¼š[è°ƒç”¨ preview_matching å·¥å…·]
åŒ¹é…ç»“æœé¢„è§ˆï¼š
1. Breaking.Bad.S01E01.1080p.BluRay.x264-SPARKS.mkv
   - åŒ¹é…å­—å¹•: Breaking.Bad.S01E01.chs&eng.ass (è¯„åˆ†: 280.0)
   - è¯­è¨€æƒé‡: 120.0
   - æ ¼å¼æƒé‡: 100.0
   - è¡€ç»ŸåŠ åˆ†: 0.0
```

## æœ€ä½³å®è·µ

### 1. æ–°ç”¨æˆ·å»ºè®®

```
ä½ ï¼šè¯·å¸®æˆ‘è®¾ç½®æ–°ç”¨æˆ·ç¯å¢ƒ

Claudeï¼š[æ‰§è¡Œä»¥ä¸‹æ­¥éª¤]
1. å…ˆå¯ç”¨æ¼”ä¹ æ¨¡å¼
   [è°ƒç”¨ set_config_value å·¥å…·ï¼Œpath="safety.dry_run", value=true]

2. é¢„è§ˆåŒ¹é…ç»“æœ
   [è°ƒç”¨ preview_matching å·¥å…·]

3. ç¡®è®¤æ— è¯¯åå…³é—­æ¼”ä¹ æ¨¡å¼
   [è°ƒç”¨ set_config_value å·¥å…·ï¼Œpath="safety.dry_run", value=false]

4. æ‰§è¡Œé‡å‘½å
   [è°ƒç”¨ rename_subtitles å·¥å…·ï¼Œconfirm=true]
```

### 2. æ‰¹é‡å¤„ç†å»ºè®®

```
ä½ ï¼šè¯·å¸®æˆ‘æ‰¹é‡å¤„ç†å¤šä¸ªç›®å½•

Claudeï¼š[æ‰§è¡Œä»¥ä¸‹æ­¥éª¤]
1. å¯ç”¨å¤‡ä»½åŠŸèƒ½
   [è°ƒç”¨ set_config_value å·¥å…·ï¼Œpath="safety.backup_enabled", value=true]

2. è®¾ç½®åˆç†çš„å¤‡ä»½ç›®å½•
   [è°ƒç”¨ set_config_value å·¥å…·ï¼Œpath="safety.backup_dir", value="å­—å¹•å¤‡ä»½_$(date +%Y%m%d)"]

3. é€ä¸ªå¤„ç†ç›®å½•
   - æ‰«æç›®å½•
   - é¢„è§ˆåŒ¹é…
   - æ‰§è¡Œé‡å‘½å
```

### 3. æ€§èƒ½ä¼˜åŒ–

- é¿å…åœ¨æ ¹ç›®å½•è¿è¡Œï¼ŒæŒ‡å®šå…·ä½“ç›®å½•
- å®šæœŸæ¸…ç†å¤‡ä»½æ–‡ä»¶
- å¯¹äºå¤§é‡æ–‡ä»¶ï¼Œåˆ†æ‰¹å¤„ç†

## é™„å½•

### A. é»˜è®¤é…ç½®å€¼

#### è¯­è¨€æƒé‡

| è¯­è¨€ç±»å‹ | æƒé‡ | å…³é”®è¯ |
|---------|------|--------|
| ç®€è‹±åŒè¯­ | 120 | chs&eng, cht&eng, ç®€ä½“&è‹±æ–‡, åŒè¯­, ä¸­è‹±, zh&en |
| ç¹è‹±åŒè¯­ | 90  | cht&eng, ç¹ä½“&è‹±æ–‡, ç¹è‹± |
| ç®€ä½“ä¸­æ–‡ | 80  | chs, sc, ç®€ä½“, ç®€ä¸­, zh |
| ç¹ä½“ä¸­æ–‡ | 70  | cht, tc, ç¹ä½“, ç¹ä¸­ |
| çº¯è‹±æ–‡ | 60  | eng, en, english |

#### æ ¼å¼æƒé‡

| æ ¼å¼ | æƒé‡ | æè¿° |
|------|------|------|
| ASS | 100 | ç‰¹æ•ˆå­—å¹•æ ¼å¼ï¼Œæ”¯æŒæ ·å¼å’Œç‰¹æ•ˆ |
| SRT | 80  | é€šç”¨å­—å¹•æ ¼å¼ |

#### å‹åˆ¶ç»„åŠ åˆ†

- å¯ç”¨: true
- æƒé‡: 20
- å¸¸è§å‹åˆ¶ç»„: eztv, rarbg, vxt, yify, yts, sparks, fgt, mgb, dimension, deflate, x264, x265, h264, h265, 1080p, 720p, 2160p, 4k, web-dl, webrip, bluray, bdrip, dvdrip

#### å®‰å…¨è®¾ç½®

- dry_run: false
- require_confirm: true
- backup_enabled: false
- backup_dir: ".backup"

#### åŒ¹é…è®¾ç½®

- min_common_tokens: 1
- min_score_threshold: 50
- skip_on_conflict: true
- log_unmatched: true

### B. æ”¯æŒçš„è§†é¢‘æ ¼å¼

- .mkv
- .mp4
- .avi
- .mov
- .wmv
- .flv
- .webm

### C. æ”¯æŒçš„å­—å¹•æ ¼å¼

- .ass
- .srt
- .sub
- .ssa

### D. æ–‡ä»¶ååŒ¹é…è§„åˆ™

1. **åˆ†è¯å¤„ç†**ï¼šå°†æ–‡ä»¶åæŒ‰åˆ†éš”ç¬¦ï¼ˆ. _ - ç©ºæ ¼ï¼‰åˆ†å‰²æˆå•è¯
2. **å‰§é›†è¯†åˆ«**ï¼šè¯†åˆ« S01E01ã€S01E02 ç­‰å‰§é›†æ ¼å¼
3. **è´¨é‡è¯†åˆ«**ï¼šè¯†åˆ« 1080pã€720pã€4K ç­‰è´¨é‡æ ‡è¯†
4. **ç¼–ç è¯†åˆ«**ï¼šè¯†åˆ« x264ã€x265ã€H.264ã€H.265 ç­‰ç¼–ç æ ¼å¼
5. **å‹åˆ¶ç»„è¯†åˆ«**ï¼šè¯†åˆ« HiQVEã€YIFYã€RARBG ç­‰å‹åˆ¶ç»„

### E. è¯„åˆ†ç®—æ³•

```
æ€»åˆ† = åŸºç¡€åˆ† + è¯­è¨€æƒé‡ + æ ¼å¼æƒé‡ + å‹åˆ¶ç»„åŠ åˆ†

ç¤ºä¾‹ï¼š
ç®€è‹±åŒè¯­ASSå­—å¹• + ç›¸åŒå‹åˆ¶ç»„
= 120ï¼ˆè¯­è¨€ï¼‰ + 100ï¼ˆæ ¼å¼ï¼‰ + 20ï¼ˆå‹åˆ¶ç»„ï¼‰
= 240åˆ†
```

## å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•åœ¨ Claude Desktop ä¸­ä½¿ç”¨ MCP SubMatcherï¼Ÿ

1. ç¡®ä¿å·²å®‰è£… [uv](https://github.com/astral-sh/uv)
2. åœ¨ Claude Desktop é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  MCP æœåŠ¡å™¨é…ç½®ï¼ˆè§ä¸Šæ–¹"é…ç½® MCP å®¢æˆ·ç«¯"ç« èŠ‚ï¼‰
3. é‡å¯ Claude Desktop
4. ç›´æ¥ä¸ Claude å¯¹è¯ï¼Œä¾‹å¦‚ï¼š"è¯·æ‰«æ /path/to/videos ç›®å½•ä¸­çš„è§†é¢‘å’Œå­—å¹•æ–‡ä»¶"

### Q2: ä½¿ç”¨ uvx å®‰è£…æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ

ä½¿ç”¨ `uvx --from git+https://github.com/sienyaa/mcp-submatcher` çš„ä¼˜åŠ¿ï¼š

- **æ— éœ€å…‹éš†é¡¹ç›®**ï¼šç›´æ¥ä» GitHub ä¸‹è½½è¿è¡Œ
- **è‡ªåŠ¨æ›´æ–°**ï¼šæ¯æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
- **é›¶ä¾èµ–ç®¡ç†**ï¼šuvx ä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰ä¾èµ–
- **æ²™ç›’åŒ–**ï¼šæ¯ä¸ªè¿è¡Œå®ä¾‹éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¼šæ±¡æŸ“ç³»ç»Ÿç¯å¢ƒ
- **å¿«é€Ÿå¯åŠ¨**ï¼šuvx ä½¿ç”¨ç¼“å­˜æœºåˆ¶ï¼Œç¬¬äºŒæ¬¡å¯åŠ¨æ›´å¿«

### Q3: ä¸ºä»€ä¹ˆæœ‰äº›å­—å¹•æ²¡æœ‰åŒ¹é…æˆåŠŸï¼Ÿ

**å¯èƒ½åŸå› **ï¼š
1. å­—å¹•æ–‡ä»¶åä¸­ç¼ºå°‘é›†å·ä¿¡æ¯ï¼ˆå¦‚ `S01E01`ï¼‰
2. å­—å¹•å’Œè§†é¢‘çš„é›†å·ä¸åŒ¹é…
3. å­˜åœ¨å¤šä¸ªç›¸åŒè¯„åˆ†çš„å€™é€‰å­—å¹•ï¼ˆå†²çªï¼‰
4. å­—å¹•æ–‡ä»¶åä¸è§†é¢‘æ–‡ä»¶åæ²¡æœ‰å…±åŒçš„å…¨å±€Token

**è§£å†³æ–¹æ³•**ï¼š
- ä½¿ç”¨ preview_matching å·¥å…·æŸ¥çœ‹è¯¦ç»†åŒ¹é…ç»“æœ
- æ£€æŸ¥å­—å¹•æ–‡ä»¶åæ˜¯å¦åŒ…å«æ­£ç¡®çš„é›†å·
- æ‰‹åŠ¨è°ƒæ•´å­—å¹•æ–‡ä»¶åï¼Œæ·»åŠ é›†å·ä¿¡æ¯

### Q4: å¦‚ä½•è°ƒæ•´è¯­è¨€ä¼˜å…ˆçº§ï¼Ÿ

é€šè¿‡ MCP å·¥å…·åŠ¨æ€ä¿®æ”¹é…ç½®ï¼š

```
ç”¨æˆ·ï¼šè¯·è·å–å½“å‰é…ç½®æ‘˜è¦
Claudeï¼š[è°ƒç”¨ get_config_summary å·¥å…·]

ç”¨æˆ·ï¼šè¯·å°†è¯­è¨€æƒé‡ä¸­ç®€è‹±åŒè¯­çš„æƒé‡è®¾ç½®ä¸º 150
Claudeï¼š[è°ƒç”¨ set_config_value å·¥å…·]
```

### Q5: ç¨‹åºä¼šä¿®æ”¹è§†é¢‘æ–‡ä»¶å—ï¼Ÿ

**ä¸ä¼š**ã€‚ç¨‹åºåªä¼šé‡å‘½åå­—å¹•æ–‡ä»¶ï¼Œä¸ä¼šä¿®æ”¹æˆ–åˆ é™¤è§†é¢‘æ–‡ä»¶ã€‚

### Q6: å¦‚ä½•æ’¤é”€é‡å‘½åæ“ä½œï¼Ÿ

ç›®å‰ç¨‹åºä¸æ”¯æŒè‡ªåŠ¨æ’¤é”€ã€‚å»ºè®®ï¼š
1. é¦–æ¬¡ä½¿ç”¨æ—¶å…ˆä½¿ç”¨ preview_matching å·¥å…·é¢„è§ˆç»“æœ
2. ç¡®è®¤ç»“æœæ— è¯¯åå†ä½¿ç”¨ rename_subtitles å·¥å…·æ‰§è¡Œé‡å‘½å
3. å¯ä»¥æ‰‹åŠ¨å¤‡ä»½å­—å¹•æ–‡ä»¶

### Q7: æ”¯æŒå“ªäº›è§†é¢‘å’Œå­—å¹•æ ¼å¼ï¼Ÿ

é»˜è®¤æ”¯æŒï¼š
- **è§†é¢‘**ï¼š`.mkv`, `.mp4`, `.avi`, `.mov`, `.wmv`, `.flv`, `.webm`
- **å­—å¹•**ï¼š`.ass`, `.srt`, `.sub`, `.ssa`

å¯ä»¥é€šè¿‡ MCP å·¥å…·åŠ¨æ€æ·»åŠ æ›´å¤šæ ¼å¼ã€‚

### Q8: ç¨‹åºèƒ½å¤„ç†å¤šä¸ªå‰§é›†æ··åˆçš„ç›®å½•å—ï¼Ÿ

**å¯ä»¥**ã€‚ç¨‹åºé€šè¿‡èšç±»åˆ†æè‡ªåŠ¨è¯†åˆ«ä¸åŒçš„å‰§é›†ï¼Œå³ä½¿å¤šä¸ªå‰§é›†æ··åˆåœ¨åŒä¸€ç›®å½•ä¹Ÿèƒ½æ­£ç¡®åŒ¹é…ã€‚

### Q9: å¦‚ä½•ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬æˆ–æœ¬åœ°å¼€å‘ç‰ˆæœ¬ï¼Ÿ

å¦‚æœéœ€è¦ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬æˆ–æœ¬åœ°å¼€å‘ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨ Claude Desktop é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨ `uv --directory` æ–¹å¼ï¼š

```json
{
  "mcpServers": {
    "submatcher": {
      "command": "uv",
      "args": [
        "--directory",
        "/path/to/mcp-submatcher",
        "run",
        "mcp-submatcher"
      ]
    }
  }
}
```

**é€‚ç”¨åœºæ™¯**ï¼š
- æœ¬åœ°å¼€å‘å’Œæµ‹è¯•
- éœ€è¦ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬
- éœ€è¦ä¿®æ”¹ä»£ç å¹¶ç«‹å³æµ‹è¯•

**æ³¨æ„**ï¼šä½¿ç”¨æ­¤æ–¹å¼å‰éœ€è¦å…ˆå…‹éš†é¡¹ç›®å¹¶è¿è¡Œ `uv sync`ã€‚

## æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæ¨¡å—

- **mcp_server.py**: MCP æœåŠ¡å™¨å…¥å£ï¼Œå®šä¹‰å·¥å…·å’Œè°ƒç”¨é€»è¾‘
- **mcp_adapter.py**: SubMatcher çš„ MCP é€‚é…å™¨ï¼Œæä¾› MCP å‹å¥½çš„æ¥å£
- **config_nlp.py**: é…ç½®æ–‡ä»¶çš„ MCP åŒ…è£…å™¨ï¼Œæ”¯æŒåŠ¨æ€é…ç½®
- **core/submatcher.py**: æ ¸å¿ƒåŒ¹é…ç®—æ³•å®ç°
- **core/config.yaml**: é»˜è®¤é…ç½®æ–‡ä»¶

### æŠ€æœ¯æ ˆ

- **è¯­è¨€**: Python 3.10+
- **MCP åè®®**: Model Context Protocol
- **æ ¸å¿ƒåº“**: pathlib, re, collections.Counter
- **é…ç½®ç®¡ç†**: PyYAML
- **åŒ…ç®¡ç†**: uv

## æ€§èƒ½ç‰¹ç‚¹

- **è½»é‡çº§**: ä»…ä½¿ç”¨æ ‡å‡†åº“å’Œå°‘é‡ä¾èµ–
- **é«˜æ•ˆ**: åŸºäºç»Ÿè®¡å’Œæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¤„ç†é€Ÿåº¦å¿«
- **å®‰å…¨**: é»˜è®¤æ¼”ä¹ æ¨¡å¼ï¼Œé˜²æ­¢è¯¯æ“ä½œ
- **çµæ´»**: å®Œå…¨å¯é…ç½®ï¼Œé€‚åº”ä¸åŒéœ€æ±‚

## å¼€å‘

### æœ¬åœ°å¼€å‘

å¦‚æœéœ€è¦æœ¬åœ°å¼€å‘æˆ–ä¿®æ”¹ä»£ç ï¼Œå¯ä»¥å…‹éš†é¡¹ç›®ï¼š

```bash
git clone https://github.com/sienyaa/mcp-submatcher.git
cd mcp-submatcher
uv sync
```

ç„¶ååœ¨ Claude Desktop é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨æœ¬åœ°ç‰ˆæœ¬ï¼š

```json
{
  "mcpServers": {
    "submatcher": {
      "command": "uv",
      "args": [
        "--directory",
        "/path/to/mcp-submatcher",
        "run",
        "mcp-submatcher"
      ]
    }
  }
}
```

### è¿è¡Œæµ‹è¯•

```bash
uv run pytest
```

### ä»£ç æ ¼å¼åŒ–

```bash
uv run black .
```

### ç±»å‹æ£€æŸ¥

```bash
uv run mypy .
```

## è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜æŠ¥å‘Šå’Œæ”¹è¿›å»ºè®®ï¼

## è®¸å¯è¯

MIT License

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2026-02-01)

- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… å®ç°æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½
- âœ… æ”¯æŒ MCP åè®®
- âœ… å®Œå–„çš„å®‰å…¨æœºåˆ¶
- âœ… è¯¦ç»†çš„æ–‡æ¡£

## ç›¸å…³é“¾æ¥

- [MCP åè®®æ–‡æ¡£](https://modelcontextprotocol.io/)
- [Claude Desktop](https://claude.ai/download)
- [uv æ–‡æ¡£](https://github.com/astral-sh/uv)

---

**äº«å— AI è¾…åŠ©çš„è‡ªåŠ¨åŒ–å­—å¹•ç®¡ç†ä½“éªŒï¼** ğŸ¬ğŸ¤–ğŸ“
